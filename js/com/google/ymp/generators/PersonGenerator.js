/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 */

CLASS({
  package: 'com.google.ymp.generators',
  name: 'PersonGenerator',
  extends: 'com.google.ymp.generators.Generator',

  requires: [
    'com.google.ymp.Person',
  ],
  imports: [
    'marketDAO_',
  ],

  properties: [
    {
      type: 'StringArray',
      name: 'firstNames',
      lazyFactory: function() {
        return [
          'Tanya',
          'rahul',
          'divya',
          'Abhishek',
          'priyanka',
          'aditya',
          'priya',
          'Amit',
          'Tanvi',
          'mahesh',
          'Gayatri',
          'rohit',
          'Riya',
          'Yash',
          'Sneha',
          'Shyam',
          'Aishwarya',
          'Arjun',
          'Shreya',
          'deepak',
          'Anusha',
          'Karan',
          'seema',
          'Aryan',
          'Varsha',
          'Raj',
          'rhea',
          'Parth',
          'ananya',
          'ankur',
          'natasha',
          'Manoj',
          'Suhani',
          'Mayank',
          'leah',
          'Rakesh',
          'Pavithra',
          'Ankit',
          'Aswini',
          'Neeraj',
          'tanu',
          'akash',
          'Ayushi',
          'kumar',
          'Vani',
          'Vinay',
          'Krithika',
          'Rishabh',
          'Isha',
          'Naveen',
          'anjali',
          'Vaibhav',
          'nishi',
          'ajith',
          'shivani',
          'Rohan',
          'ishita',
          'Sam',
          'Anushri',
          'Aaditya',
          'shivangi',
          'vivek',
          'Radhika',
          'Ashish',
          'Niharika',
          'Abhinav',
          'Sakshi',
          'Alok',
          'Nandita',
          'Raghav',
          'manisha',
          'Ajay',
          'Arya',
          'Soham',
          'chanchal',
          'Sunny',
          'sanjana',
          'varun',
          'deepa',
          'Siddharth',
          'diksha',
          'Nitin',
          'Mitali',
          'vishal',
          'kavya',
          'abdul',
          'NISHA',
          'shivam',
          'Dilmini',
          'VEDANT',
          'Rashi',
          'MOHIT',
          'Ina',
          'ABHI',
          'Apoorva',
          'Pranav',
          'juvina',
          'Anish',
          'Arusha',
          'jay',
          'anamika',
          'Nishant',
          'Lala',
          'anil',
          'geyir',
          'vikas',
          'swati',
          'Harish',
          'Tisha',
          'Rajeev',
          'Crowny',
          'Avinash',
          'Aditi',
          'Nitesh',
          'Niti',
          'Ramanan',
          'anu',
          'Sunil',
          'Isabel',
          'Ajeet',
          'Dawn',
          'SUMIT',
          'neha',
          'raju',
          'Aastha',
          'GIRISH',
          'binita',
          'rishi',
          'ria',
          'john',
          'Anisha',
          'Paaus',
          'Urvashi',
          'Aniket',
          'Sam',
          'SURESH',
          'Akansha',
          'prince',
          'keerthi',
          'manu',
          'Angel',
          'Aman',
          'Neelam',
          'Shekhar',
          'Lavanya',
          'PRATEEK',
          'Manasa',
          'PANKAJ',
          'hannah',
          'Deepro',
          'Kalyani',
          'Anirudh',
          'Ira',
          'Arun',
          'Gitanjali',
          'Krishna',
          'Alice',
          'sanjay',
          'arti',
          'shaan',
          'diya',
          'tushar',
          'jiffy',
          'Kartik',
          'AARUSHI',
          'Dhruv',
          'Gowri',
          'sanchit',
          'shrinidhi',
          'Shashank',
          'suvi',
          'Vijay',
          'Sheal',
          'krish',
          'Sonam',
          'Pratik',
          'Sadaf',
          'Himanshu',
          'Namrata',
          'Deep',
          'debbie',
          'Akshay',
          'indhumathi',
          'dinesh',
          'Sowmya',
          'Avi',
          'Mahima',
          'atul',
          'Siya',
          'manish',
          'Papuii',
          'Anurag',
          'Eli',
          'Prashant',
          'Reshma',
          'Lipun',
          'ARCHITA',
          'ANAND',
          'ANJU',
          'Ram',
          'faith',
          'John',
          'Sharon',
          'James',
          'Diana',
          'david',
          'Anne',
          'robert',
          'Linda',
          'martin',
          'winnie',
          'Joseph',
          'kelly',
          'Victor',
          'Esther',
          'peter',
          'Joan',
          'Daniel',
          'Isabel',
          'Simon',
          'olive',
          'George',
          'pauline',
          'eric',
          'christine',
          'Brian',
          'Melanie',
          'dennis',
          'Damaris',
          'Ken',
          'Mercy',
          'samuel',
          'Rose',
          'Patrick',
          'mary',
          'kelvin',
          'Lucy',
          'benard',
          'LISA',
          'Elvis',
          'Beryl',
          'Kennedy',
          'susan',
          'Kevin',
          'Wendy',
          'jeff',
          'VIVIAN',
          'collins',
          'Angela',
          'joe',
          'Jennifer',
          'Lewis',
          'Judy',
          'mike',
          'harriet',
          'Teddy',
          'grace',
          'jeremy',
          'janet',
          'emmanuel',
          'ann',
          'Prince Peter',
          'Annitah',
          'Francis',
          'Belinda',
          'Ian',
          'alice',
          'mark',
          'valentine',
          'Bryan',
          'Florence',
          'shaaban',
          'Lily',
          'Evans',
          'sarah',
          'chris',
          'Naomi',
          'Stephen',
          'Patience',
          'moses',
          'cynthia',
          'Shem',
          'Maureen',
          'geoffrey',
          'Hildah',
          'vincent',
          'Eve',
          'Eugene',
          'Nelly',
          'denis',
          'joy',
          'HENRY',
          'AMANDA',
          'bonface',
          'shiro',
          'oliver',
          'tracy',
          'Antony',
          'Winny',
          'Tony',
          'sylvia',
          'FONTE',
          'Maxine',
          'Reagan',
          'Aisha',
          'Michael',
          'Liz',
          'frank',
          'immah',
          'Paul',
          'Anita',
          'Alex',
          'gloria',
          'fredrick',
          'Cindy',
          'charles',
          'Sandra',
          'Davis',
          'nicole',
          'meshack',
          'DORAH',
          'shiftar',
          'Lorraine',
          'TITUS',
          'Juliana',
          'Maurice',
          'Marion',
          'Kenn',
          'Ilthiam',
          'WYCLIFF',
          'cecilia',
          'Hightham',
          'kuki',
          'sammy',
          'Rachel',
          'ali',
          'Patricia',
          'Erick',
          'Bethsheba',
          'Clement',
          'Shirley',
          'Alfred',
          'jane',
          'joram',
          'SAUMU',
          'Paul Onyango',
          'HALIMA',
          'Felix',
          'Fatuma',
          'isaac',
          'Kelsey',
          'Anthony',
          'shi',
          'Eddy',
          'Kileen',
          'calvince',
          'nellie',
          'Edwin',
          'loureen',
          'sylvester',
          'zeddy',
          'Ricky',
          'miriam',
          'Herbert',
          'Ida',
          'David Kamau',
          'monaa',
          'Wycliffe',
          'Hanna montana',
          'issa',
          'keyuri',
          'hannes',
          'janerosa',
          'leon',
          'Favour',
          'Kelvin Muthengi',
          'cather',
          'Verdez',
          'jayke',
          'Hassan',
          'waithira',
          'Nick',
          'fridah',
          'Benjamin',
          'marvelyne',
          'Sam',
          'milkah',
          'Nelson',
          'Annah',
          'Kelly',
          'viki',
          'billy',
          'Noel',
          'samy',
          'Mayra',
          'Dominic',
          'loice',
          'craig',
          'Tiffany',
          'Benson',
          'wang',
          'wang',
          'chen',
          'chen',
          'Lily',
          'zhang',
          'Li',
          'Liu',
          'zhang',
          'Li',
          'Liu',
          'Yang',
          'Yang',
          'KEVIN',
          'ALICE',
          'Lee',
          'Jane',
          'Jack',
          'lin',
          'Zhou',
          'Lee',
          'Jason',
          'Vivian',
          'tom',
          'Cherry',
          'Tony',
          'Amy',
          'Alex',
          'Sunny',
          'wu',
          'Sherry',
          'lin',
          'Jessica',
          'YU',
          'cindy',
          'zhao',
          'Daisy',
          'Xu',
          'lucy',
          'Leo',
          'huang',
          'Eric',
          'sun',
          'Huang',
          'Zoe',
          'David',
          'Helen',
          'John',
          'emily',
          'Jerry',
          'Jenny',
          'peter',
          'Crystal',
          'Andy',
          'Echo',
          'harry',
          'shirley',
          'Chan',
          'Nancy',
          'Àî',
          'Ann',
          'Frank',
          'Candy',
          'Charles',
          'Yu',
          'Tang',
          'ZHOU',
          'Sun',
          'Tina',
          'Chris',
          'linda',
          'zheng',
          'Catherine',
          'jiang',
          'wendy',
          'ÕÅ',
          'Anna',
          'Mike',
          'Yan',
          'bruce',
          'Caroline',
          'Hu',
          'Summer',
          'xiao',
          'Wu',
          'Guo',
          'Vicky',
          'Bob',
          'Ivy',
          'Hao',
          'Nicole',
          'wei',
          'Angela',
          'zhu',
          'COCO',
          'daniel',
          'Àî',
          'Cheng',
          'Íõ',
          'steven',
          'Emma',
          'Song',
          'Xu',
          'William',
          'Victoria',
          'Íõ',
          'Grace',
          'Yuan',
          'Rachel',
          'Sam',
          'Cathy',
          'Michael',
          'JOYCE',
          'liang',
          'Charlotte',
          'xie',
          'Amanda',
          'James',
          'Jing',
          'Justin',
          'Lu',
          'YAO',
          'Kelly',
          'DENG',
          'Iris',
          'allen',
          'Lisa',
          'zeng',
          'bella',
          'luo',
          'annie',
          'ding',
          'han',
          'Kai',
          'Elaine',
          'sean',
          'Yuan',
          'han',
          'Claire',
          'Edison',
          'ÕÅ',
          'Gao',
          'Jasmine',
          'Alan',
          'Tang',
          'Edward',
          'Sophia',
          'Jim',
          'Joy',
          'YE',
          'Tiffany',
          'Nick',
          'yi',
          'yan',
          'zhu',
          'ni',
          'Doris',
          'Mark',
          'mary',
          'Will',
          'Sophie',
          'Simon',
          'Sharon',
          'Lei',
          'Rebecca',
          'LILY',
          'Fiona',
          'George',
          'Diana',
          'TIAN',
          'angel',
          'peng',
          'Katherine',
          'ken',
          'Amber',
          'Chao',
          'rita',
          'Ben',
          'Carol',
          'Jeff',
          'Sue',
          'Lu',
          'Ling',
          'Dong',
          'Olivia',
          'xiang',
          'Ãô',
          'He',
          'YING',
          'Jin',
          'Wei',
          'ming',
          'zhao',
          'Joe',
          'Betty',
          'yi',
          'Mandy',
          'Su',
          'christina',
          'Îâ',
        ];
      },
    },
    {
      type: 'StringArray',
      name: 'lastNames',
      lazyFactory: function() {
        return [
          'Sharma',
          'Verma',
          'Gupta',
          'Malhotra',
          'Bhatnagar',
          'Saxena',
          'Kapoor',
          'Singh',
          'Mehra',
          'Chopra',
          'Sarin',
          'Malik',
          'Chatterjee',
          'Sen',
          'Bose',
          'Sengupta',
          'Das',
          'Dasgupta',
          'Banerjee',
          'Chattopadhyay',
          'Mukopadhyay',
          'Dutta',
          'Nair',
          'Pillai',
          'Rao',
          'Jayaraman',
          'Venkatesan',
          'Balasubramanium',
          'Subramanium',
          'Rangan',
          'Rangarajan',
          'Singh',
          'Yadav',
          'Jhadav',
          'Jaiteley',
          'Chauhan',
          'Mistry',
          'Khan',
          'Shah',
          'Mehta',
          'Patel',
          'Patil',
          'Pawar',
          'Gavde',
          'Kadam',
          'Tambe',
          'Chavan',
          'Azikiwe',
          'Chahine',
          'Bello',
          'Cisse',
          'Akintola',
          'Okotie-Eboh',
          'Nzeogwu',
          'nwuatuegwu',
          'Okafor',
          'Contee',
          'Okeke',
          'Conteh',
          'Okoye',
          'Diallo',
          'Obasanjo',
          'Babangida',
          'Buhari',
          'Dimka',
          'Toure',
          'Diya',
          'Odili',
          'Ibori',
          'Igbinedion',
          'Alamieyeseigha',
          'Yar’Adua',
          'Asari-Dokubo',
          'Jalloh',
          'Anikulapo-Kuti',
          'Iwu',
          'Anenih',
          'Mensah',
          'Biobaku',
          'Tinibu',
          'Sesay',
          'Akinyemi',
          'Akiloye',
          'Adeyemi',
          'Adesida',
          'Omehia',
          'Sekibo',
          'Amaechi',
          'Bankole',
          'Nnamani',
          'Turay',
          'Okadigbo',
          'Yeboah',
          'Ojukwu',
          'Danjuma',
          'Effiong',
          'Akpabio',
          'Attah',
          'Chukwumereije',
          'Fofana',
          'Iweala',
          'Okonjo',
          'Ezekwesili',
          'Keita',
          'Soyinka',
          'Solarin',
          'Gbadamosi',
          'Olanrewaju',
          'Magoro',
          'Madaki',
          'Jang',
          'Oyinlola',
          'Oyenusi',
          'Sow',
          'Onwudiwe',
          'Jakande',
          'Sane',
          'Igwe',
          'Sylla',
          'Obi',
          'Gueye',
          'Uba',
          'Kalu',
          'Orji',
          'Ohakim',
          'Egwu',
          'Adesina',
          'Traore',
          'Falana',
          'Fagbure',
          'Jaja',
          'Okilo',
          'Okiro',
          'Balogun',
          'Alakija',
          'Akenzua',
          'Akerele',
          'Ademola',
          'Onobanjo',
          'Aguda',
          'Okpara',
          'Mbanefo',
          'Kone',
          'Boro',
          'Ekwensi',
          'Lǐ',
          'Wáng',
          'Zhāng',
          'Liú',
          'Chén',
          'Yáng',
          'Zhào',
          'Huáng',
          'Zhōu',
          'Wú',
          'Xú',
          'Sūn',
          'Hú',
          'Zhū',
          'Gāo',
          'Lín',
          'Hé',
          'Guō',
          'Mǎ',
          'Luó',
          'Liáng',
          'Sòng',
          'Zhèng',
          'Xiè',
          'Hán',
          'Táng',
          'Féng',
          'Yú',
          'Dǒng',
          'Xiāo',
          'Chéng',
          'Cáo',
          'Yuán',
          'Dèng',
          'Xǔ',
          'Fù',
          'Shěn',
          'Zēng',
          'Péng',
          'Lǚ',
          'Sū',
          'Lú',
          'Jiǎng',
          'Cài',
          'Jiǎ',
          'Dīng',
          'Wèi',
          'Xuē',
          'Yè',
          'Yán',
          'Yú',
          'Pān',
          'Dù',
          'Dài',
          'Xià',
          'Zhōng',
          'Wāng',
          'Tián',
          'Rén',
          'Jiāng',
          'Fàn',
          'Fāng',
          'Shí',
          'Yáo',
          'Tán',
          'Shèng',
          'Zōu',
          'Xióng',
          'Jīn',
          'Lù',
          'Hǎo',
          'Kǒng',
          'Bái',
          'Cuī',
          'Kāng',
          'Máo',
          'Qiū',
          'Qín',
          'Jiāng',
          'Shǐ',
          'Gù',
          'Hóu',
          'Shào',
          'Mèng',
          'Lóng',
          'Wàn',
          'Duàn',
          'Zhāng',
          'Qián',
          'Tāng',
          'Yǐn',
          'Lí',
          'Yì',
          'Cháng',
          'Wǔ',
          'Qiáo',
          'Hè',
          'Lài',
          'Gōng',
          'Wén',
        ];
      },
    },
  ],

  methods: [
    function generate(ret) {
      var person = this.Person.create();
      person.id = createGUID();
      var self = this;
      apar(
          function(ret) { self.getName(ret, person); },
          function(ret) { self.getMarkets(ret, person); })
      (function() { ret(person); });
    },

    function getName(ret, person) {
      person.name = this.randArrElem(this.firstNames) + ' ' + this.randArrElem(this.lastNames);
      ret(person);
    },

    function getMarkets(ret, person) {
      var dao = this.marketDAO_;
      dao.select(COUNT())(function(c) {
        var count = c.count;
        var num = Math.floor(Math.random() * 5) + 1;
        var markets = [];
        var par = [];

        var f = function(i, ret) {
          var choice = Math.floor(Math.random() * count);
          dao.skip(choice).limit(1).select({
            put: function(market) {
              if ( ! markets.some(function(marketId) {
                return marketId === market.id;
              }) ) markets.push(market.id);
              ret(markets);
            },
          });
        };

        for ( var i = 0; i < num; ++i ) {
          par.push(f.bind(this, i));
        }
        apar.apply(null, par)(function() {
          person.subscribedMarkets = markets;
          ret(person);
        });
      });
    },
  ],
});
